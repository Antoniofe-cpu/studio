{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///Users/antonio/Desktop/WatchGraph/src/lib/firebase.ts"],"sourcesContent":["// Contenuto per: src/lib/firebase.ts\n\nimport { initializeApp, getApps, getApp } from 'firebase/app';\nimport { getFirestore } from 'firebase/firestore';\n\n// La tua configurazione Firebase dal frontend\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBsup1LANccRepTNF0Y1CoBcfMjnqZGkyw\",\n  authDomain: \"watchgraph-a91fd.firebaseapp.com\",\n  projectId: \"watchgraph-a91fd\",\n  storageBucket: \"watchgraph-a91fd.firebasestorage.app\",\n  messagingSenderId: \"984650741137\",\n  appId: \"1:984650741137:web:861fec7023fe4afbe5d630\",\n  measurementId: \"G-8KZVYL1TGD\"\n};\n\n// Inizializza Firebase solo se non è già stato fatto\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\n\nconst db = getFirestore(app);\n\nexport { db };"],"names":[],"mappings":"AAAA,qCAAqC;;;;AAErC;AAAA;AACA;AAAA;;;AAEA,8CAA8C;AAC9C,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACjB;AAEA,qDAAqD;AACrD,MAAM,MAAM,CAAC,CAAA,GAAA,oLAAA,CAAA,UAAO,AAAD,IAAI,MAAM,GAAG,CAAA,GAAA,oLAAA,CAAA,gBAAa,AAAD,EAAE,kBAAkB,CAAA,GAAA,oLAAA,CAAA,SAAM,AAAD;AAErE,MAAM,KAAK,CAAA,GAAA,iKAAA,CAAA,eAAY,AAAD,EAAE","debugId":null}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file:///Users/antonio/Desktop/WatchGraph/src/app/page.tsx"],"sourcesContent":["// Contenuto per: src/app/page.tsx\n\nimport { db } from '@/lib/firebase'; // Importiamo la nostra connessione a Firebase\nimport { collection, getDocs, query, orderBy, limit } from 'firebase/firestore';\nimport Link from 'next/link';\n\n// Definiamo un tipo per i nostri dati, per avere autocompletamento e sicurezza\ninterface Deal {\n  id: string;\n  title: string;\n  brand: string;\n  model: string;\n  listingPrice: number;\n  marketPrice?: number;\n  retailPrice?: number;\n  estimatedMargin?: number;\n  imageUrl?: string;\n  sourceUrl: string;\n}\n\n// Funzione asincrona per caricare i dati da Firebase\nasync function getDeals(): Promise<Deal[]> {\n  try {\n    const dealsRef = collection(db, \"deals_final\"); // <-- USA IL NOME DELLA TUA COLLEZIONE FINALE\n    // Ordiniamo per data di aggiornamento (i più recenti prima) e ne prendiamo 50\n    const q = query(dealsRef, orderBy(\"lastUpdated\", \"desc\"), limit(50));\n    const querySnapshot = await getDocs(q);\n\n    const deals: Deal[] = [];\n    querySnapshot.forEach((doc) => {\n      // Usiamo un cast di tipo per dire a TypeScript come sono fatti i dati\n      deals.push(doc.data() as Deal);\n    });\n\n    console.log(`Caricati ${deals.length} annunci da Firebase.`);\n    return deals;\n  } catch (error) {\n    console.error(\"Errore nel caricare i dati da Firebase:\", error);\n    return []; // Restituisci un array vuoto in caso di errore\n  }\n}\n\n\n// Questa è la nostra pagina principale\nexport default async function HomePage() {\n  // Next.js eseguirà questa funzione sul server per caricare i dati\n  const deals = await getDeals();\n\n  return (\n    <main className=\"container mx-auto p-4\">\n      <h1 className=\"text-4xl font-bold mb-8 text-center\">WatchFinder AI - Ultime Offerte</h1>\n      \n      {/* Mostra un messaggio se non ci sono annunci */}\n      {deals.length === 0 && (\n        <p className=\"text-center text-gray-500\">\n          Nessuna offerta trovata. Esegui lo script Python (`python orchestrator.py`) per popolare il database.\n        </p>\n      )}\n\n      {/* Creiamo una griglia per mostrare le card degli annunci */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n        {deals.map((deal) => (\n          // Usiamo il 'Link' di Next.js per rendere ogni card cliccabile\n          <Link href={deal.sourceUrl} key={deal.id} target=\"_blank\" rel=\"noopener noreferrer\" className=\"block border rounded-lg overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300 bg-gray-800 text-white\">\n            <div className=\"relative\">\n              {/* Immagine dell'orologio */}\n              <img \n                src={deal.imageUrl || 'https://placehold.co/600x400/2d3748/e2e8f0?text=No+Image'} \n                alt={deal.title}\n                className=\"w-full h-48 object-cover\"\n              />\n            </div>\n            <div className=\"p-4\">\n              {/* Marca */}\n              <p className=\"text-sm text-gray-400\">{deal.brand || 'N/A'}</p>\n              {/* Titolo */}\n              <h2 className=\"text-lg font-semibold truncate\" title={deal.title}>\n                {deal.title}\n              </h2>\n              {/* Prezzo */}\n              <div className=\"mt-4\">\n                <p className=\"text-2xl font-bold text-teal-400\">\n                  €{deal.listingPrice.toLocaleString('it-IT')}\n                </p>\n                {/* Mostriamo il prezzo di mercato solo se esiste */}\n                {deal.marketPrice && (\n                  <p className=\"text-sm text-gray-500\">\n                    Valore di mercato stimato: €{deal.marketPrice.toLocaleString('it-IT')}\n                  </p>\n                )}\n              </div>\n              {/* Margine stimato */}\n              {deal.estimatedMargin && (\n                 <p className={`mt-2 font-semibold ${deal.estimatedMargin > 0 ? 'text-green-400' : 'text-red-400'}`}>\n                   Margine stimato: {deal.estimatedMargin > 0 ? '+' : ''}{deal.estimatedMargin}%\n                 </p>\n              )}\n            </div>\n          </Link>\n        ))}\n      </div>\n    </main>\n  );\n}"],"names":[],"mappings":"AAAA,kCAAkC;;;;;AAElC,8MAAqC,8CAA8C;AACnF;AAAA;AACA;;;;;AAgBA,qDAAqD;AACrD,eAAe;IACb,IAAI;QACF,MAAM,WAAW,CAAA,GAAA,iKAAA,CAAA,aAAU,AAAD,EAAE,sHAAA,CAAA,KAAE,EAAE,gBAAgB,8CAA8C;QAC9F,8EAA8E;QAC9E,MAAM,IAAI,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,UAAU,CAAA,GAAA,iKAAA,CAAA,UAAO,AAAD,EAAE,eAAe,SAAS,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE;QAChE,MAAM,gBAAgB,MAAM,CAAA,GAAA,iKAAA,CAAA,UAAO,AAAD,EAAE;QAEpC,MAAM,QAAgB,EAAE;QACxB,cAAc,OAAO,CAAC,CAAC;YACrB,sEAAsE;YACtE,MAAM,IAAI,CAAC,IAAI,IAAI;QACrB;QAEA,QAAQ,GAAG,CAAC,CAAC,SAAS,EAAE,MAAM,MAAM,CAAC,qBAAqB,CAAC;QAC3D,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2CAA2C;QACzD,OAAO,EAAE,EAAE,+CAA+C;IAC5D;AACF;AAIe,eAAe;IAC5B,kEAAkE;IAClE,MAAM,QAAQ,MAAM;IAEpB,qBACE,8OAAC;QAAK,WAAU;;0BACd,8OAAC;gBAAG,WAAU;0BAAsC;;;;;;YAGnD,MAAM,MAAM,KAAK,mBAChB,8OAAC;gBAAE,WAAU;0BAA4B;;;;;;0BAM3C,8OAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC,OACV,+DAA+D;kCAC/D,8OAAC,4JAAA,CAAA,UAAI;wBAAC,MAAM,KAAK,SAAS;wBAAgB,QAAO;wBAAS,KAAI;wBAAsB,WAAU;;0CAC5F,8OAAC;gCAAI,WAAU;0CAEb,cAAA,8OAAC;oCACC,KAAK,KAAK,QAAQ,IAAI;oCACtB,KAAK,KAAK,KAAK;oCACf,WAAU;;;;;;;;;;;0CAGd,8OAAC;gCAAI,WAAU;;kDAEb,8OAAC;wCAAE,WAAU;kDAAyB,KAAK,KAAK,IAAI;;;;;;kDAEpD,8OAAC;wCAAG,WAAU;wCAAiC,OAAO,KAAK,KAAK;kDAC7D,KAAK,KAAK;;;;;;kDAGb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAE,WAAU;;oDAAmC;oDAC5C,KAAK,YAAY,CAAC,cAAc,CAAC;;;;;;;4CAGpC,KAAK,WAAW,kBACf,8OAAC;gDAAE,WAAU;;oDAAwB;oDACN,KAAK,WAAW,CAAC,cAAc,CAAC;;;;;;;;;;;;;oCAKlE,KAAK,eAAe,kBAClB,8OAAC;wCAAE,WAAW,CAAC,mBAAmB,EAAE,KAAK,eAAe,GAAG,IAAI,mBAAmB,gBAAgB;;4CAAE;4CAChF,KAAK,eAAe,GAAG,IAAI,MAAM;4CAAI,KAAK,eAAe;4CAAC;;;;;;;;;;;;;;uBA/BpD,KAAK,EAAE;;;;;;;;;;;;;;;;AAwClD","debugId":null}}]
}